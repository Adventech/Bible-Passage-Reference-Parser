// Generated by CoffeeScript 1.3.3
(function() {

  describe("Parsing", function() {
    var p;
    p = {};
    beforeEach(function() {
      p = new bcv_parser;
      p.options.osis_compaction_strategy = "b";
      return p.options.sequence_combination_strategy = "combine";
    });
    it("should round-trip OSIS references", function() {
      var bc, bcv, bcv_range, book, books, _i, _len, _results;
      p.set_options({
        osis_compaction_strategy: "bc"
      });
      books = ["Gen", "Exod", "Lev", "Num", "Deut", "Josh", "Judg", "Ruth", "1Sam", "2Sam", "1Kgs", "2Kgs", "1Chr", "2Chr", "Ezra", "Neh", "Esth", "Job", "Ps", "Prov", "Eccl", "Song", "Isa", "Jer", "Lam", "Ezek", "Dan", "Hos", "Joel", "Amos", "Obad", "Jonah", "Mic", "Nah", "Hab", "Zeph", "Hag", "Zech", "Mal", "Matt", "Mark", "Luke", "John", "Acts", "Rom", "1Cor", "2Cor", "Gal", "Eph", "Phil", "Col", "1Thess", "2Thess", "1Tim", "2Tim", "Titus", "Phlm", "Heb", "Jas", "1Pet", "2Pet", "1John", "2John", "3John", "Jude", "Rev"];
      _results = [];
      for (_i = 0, _len = books.length; _i < _len; _i++) {
        book = books[_i];
        bc = book + ".1";
        bcv = bc + ".1";
        bcv_range = bcv + "-" + bc + ".2";
        expect(p.parse(bc).osis()).toEqual(bc);
        expect(p.parse(bcv).osis()).toEqual(bcv);
        _results.push(expect(p.parse(bcv_range).osis()).toEqual(bcv_range));
      }
      return _results;
    });
    return it("should round-trip OSIS Apocrypha references", function() {
      var bc, bcv, bcv_range, book, books, _i, _j, _len, _len1, _results;
      p.set_options({
        osis_compaction_strategy: "bc"
      });
      p.include_apocrypha(true);
      books = ["Tob", "Jdt", "GkEsth", "Wis", "Sir", "Bar", "PrAzar", "Sus", "Bel", "SgThree", "EpJer", "1Macc", "2Macc", "3Macc", "4Macc", "1Esd", "2Esd", "PrMan"];
      for (_i = 0, _len = books.length; _i < _len; _i++) {
        book = books[_i];
        bc = book + ".1";
        bcv = bc + ".1";
        bcv_range = bcv + "-" + bc + ".2";
        expect(p.parse(bc).osis()).toEqual(bc);
        expect(p.parse(bcv).osis()).toEqual(bcv);
        expect(p.parse(bcv_range).osis()).toEqual(bcv_range);
      }
      p.include_apocrypha(false);
      _results = [];
      for (_j = 0, _len1 = books.length; _j < _len1; _j++) {
        book = books[_j];
        bc = book + ".1";
        _results.push(expect(p.parse(bc).osis()).toEqual(""));
      }
      return _results;
    });
  });

  describe("Spanish parsing", function() {
    var p;
    p = {};
    beforeEach(function() {
      p = new bcv_parser;
      p.options.book_alone_strategy = "ignore";
      p.options.book_sequence_strategy = "ignore";
      p.options.osis_compaction_strategy = "bc";
      return p.options.captive_end_digits_strategy = "delete";
    });
    it("should handle chapters", function() {
      expect(p.parse("Mateo 2:1, CAPÍTULO 6").osis()).toEqual("Matt.2.1,Matt.6");
      expect(p.parse("Mateo 3:1, CAPITULO 6").osis()).toEqual("Matt.3.1,Matt.6");
      return expect(p.parse("Mateo 4:1, capítulo 6").osis()).toEqual("Matt.4.1,Matt.6");
    });
    it("should handle explicit verse references", function() {
      expect(p.parse("Fil 2, VERSÍCULO 6").osis()).toEqual("Phil.2.6");
      return expect(p.parse("Luc 1 vers. 6").osis()).toEqual("Luke.1.6");
    });
    it("should handle Psalm titles", function() {
      expect(p.parse("Sal 33:tÍtulo").osis()).toEqual("Ps.33.1");
      expect(p.parse("Salmo 120 TÍT 3, 6 título").osis()).toEqual("Ps.120.1,Ps.120.3,Ps.6.1");
      return expect(p.parse("Salmo 12 tít.").osis()).toEqual("Ps.12.1");
    });
    it("should handle ranges", function() {
      return expect(p.parse("Cant. 2:3 á 3:4").osis()).toEqual("Song.2.3-Song.3.4");
    });
    it("should handle sequences", function() {
      return expect(p.parse("Tito 1 y 3").osis()).toEqual("Titus.1,Titus.3");
    });
    return it("should handle ordinals", function() {
      expect(p.parse("1º corintios 2").osis()).toEqual("1Cor.2");
      return expect(p.parse("3.º Juan 2").osis()).toEqual("3John.1.2");
    });
  });

}).call(this);
