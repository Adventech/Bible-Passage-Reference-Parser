<!DOCTYPE html>  <html> <head>   <title>eu_es_spec.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="bcv_parser.html">                 bcv_parser.coffee               </a>                                           <a class="source" href="bcv_passage.html">                 bcv_passage.coffee               </a>                                           <a class="source" href="en_regexps.html">                 en_regexps.coffee               </a>                                           <a class="source" href="en_translations.html">                 en_translations.coffee               </a>                                           <a class="source" href="es_regexps.html">                 es_regexps.coffee               </a>                                           <a class="source" href="es_translations.html">                 es_translations.coffee               </a>                                           <a class="source" href="en_spec.html">                 en_spec.coffee               </a>                                           <a class="source" href="es_spec.html">                 es_spec.coffee               </a>                                           <a class="source" href="eu_es_spec.html">                 eu_es_spec.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               eu_es_spec.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nx">describe</span> <span class="s2">&quot;Parsing&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">p = </span><span class="p">{}</span>
	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;b&quot;</span>
		<span class="nv">p.options.sequence_combination_strategy = </span><span class="s2">&quot;combine&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should round-trip OSIS references&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">osis_compaction_strategy: </span><span class="s2">&quot;bc&quot;</span>
		<span class="nv">books = </span><span class="p">[</span><span class="s2">&quot;Gen&quot;</span><span class="p">,</span><span class="s2">&quot;Exod&quot;</span><span class="p">,</span><span class="s2">&quot;Lev&quot;</span><span class="p">,</span><span class="s2">&quot;Num&quot;</span><span class="p">,</span><span class="s2">&quot;Deut&quot;</span><span class="p">,</span><span class="s2">&quot;Josh&quot;</span><span class="p">,</span><span class="s2">&quot;Judg&quot;</span><span class="p">,</span><span class="s2">&quot;Ruth&quot;</span><span class="p">,</span><span class="s2">&quot;1Sam&quot;</span><span class="p">,</span><span class="s2">&quot;2Sam&quot;</span><span class="p">,</span><span class="s2">&quot;1Kgs&quot;</span><span class="p">,</span><span class="s2">&quot;2Kgs&quot;</span><span class="p">,</span><span class="s2">&quot;1Chr&quot;</span><span class="p">,</span><span class="s2">&quot;2Chr&quot;</span><span class="p">,</span><span class="s2">&quot;Ezra&quot;</span><span class="p">,</span><span class="s2">&quot;Neh&quot;</span><span class="p">,</span><span class="s2">&quot;Esth&quot;</span><span class="p">,</span><span class="s2">&quot;Job&quot;</span><span class="p">,</span><span class="s2">&quot;Ps&quot;</span><span class="p">,</span><span class="s2">&quot;Prov&quot;</span><span class="p">,</span><span class="s2">&quot;Eccl&quot;</span><span class="p">,</span><span class="s2">&quot;Song&quot;</span><span class="p">,</span><span class="s2">&quot;Isa&quot;</span><span class="p">,</span><span class="s2">&quot;Jer&quot;</span><span class="p">,</span><span class="s2">&quot;Lam&quot;</span><span class="p">,</span><span class="s2">&quot;Ezek&quot;</span><span class="p">,</span><span class="s2">&quot;Dan&quot;</span><span class="p">,</span><span class="s2">&quot;Hos&quot;</span><span class="p">,</span><span class="s2">&quot;Joel&quot;</span><span class="p">,</span><span class="s2">&quot;Amos&quot;</span><span class="p">,</span><span class="s2">&quot;Obad&quot;</span><span class="p">,</span><span class="s2">&quot;Jonah&quot;</span><span class="p">,</span><span class="s2">&quot;Mic&quot;</span><span class="p">,</span><span class="s2">&quot;Nah&quot;</span><span class="p">,</span><span class="s2">&quot;Hab&quot;</span><span class="p">,</span><span class="s2">&quot;Zeph&quot;</span><span class="p">,</span><span class="s2">&quot;Hag&quot;</span><span class="p">,</span><span class="s2">&quot;Zech&quot;</span><span class="p">,</span><span class="s2">&quot;Mal&quot;</span><span class="p">,</span><span class="s2">&quot;Matt&quot;</span><span class="p">,</span><span class="s2">&quot;Mark&quot;</span><span class="p">,</span><span class="s2">&quot;Luke&quot;</span><span class="p">,</span><span class="s2">&quot;John&quot;</span><span class="p">,</span><span class="s2">&quot;Acts&quot;</span><span class="p">,</span><span class="s2">&quot;Rom&quot;</span><span class="p">,</span><span class="s2">&quot;1Cor&quot;</span><span class="p">,</span><span class="s2">&quot;2Cor&quot;</span><span class="p">,</span><span class="s2">&quot;Gal&quot;</span><span class="p">,</span><span class="s2">&quot;Eph&quot;</span><span class="p">,</span><span class="s2">&quot;Phil&quot;</span><span class="p">,</span><span class="s2">&quot;Col&quot;</span><span class="p">,</span><span class="s2">&quot;1Thess&quot;</span><span class="p">,</span><span class="s2">&quot;2Thess&quot;</span><span class="p">,</span><span class="s2">&quot;1Tim&quot;</span><span class="p">,</span><span class="s2">&quot;2Tim&quot;</span><span class="p">,</span><span class="s2">&quot;Titus&quot;</span><span class="p">,</span><span class="s2">&quot;Phlm&quot;</span><span class="p">,</span><span class="s2">&quot;Heb&quot;</span><span class="p">,</span><span class="s2">&quot;Jas&quot;</span><span class="p">,</span><span class="s2">&quot;1Pet&quot;</span><span class="p">,</span><span class="s2">&quot;2Pet&quot;</span><span class="p">,</span><span class="s2">&quot;1John&quot;</span><span class="p">,</span><span class="s2">&quot;2John&quot;</span><span class="p">,</span><span class="s2">&quot;3John&quot;</span><span class="p">,</span><span class="s2">&quot;Jude&quot;</span><span class="p">,</span><span class="s2">&quot;Rev&quot;</span><span class="p">]</span>
		<span class="k">for</span> <span class="nx">book</span> <span class="k">in</span> <span class="nx">books</span>
			<span class="nv">bc = </span><span class="nx">book</span> <span class="o">+</span> <span class="s2">&quot;,1&quot;</span>
			<span class="nv">bcv = </span><span class="nx">bc</span> <span class="o">+</span> <span class="s2">&quot;,1&quot;</span>
			<span class="nv">bcv_range = </span><span class="nx">bcv</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">bc</span> <span class="o">+</span> <span class="s2">&quot;,2&quot;</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bc</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bc</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/,/g</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bcv</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bcv</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/,/g</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bcv_range</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bcv_range</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/,/g</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>

	<span class="nx">it</span> <span class="s2">&quot;should round-trip OSIS Apocrypha references&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">set_options</span> <span class="nv">osis_compaction_strategy: </span><span class="s2">&quot;bc&quot;</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">true</span>
		<span class="nv">books = </span><span class="p">[</span><span class="s2">&quot;Tob&quot;</span><span class="p">,</span><span class="s2">&quot;Jdt&quot;</span><span class="p">,</span><span class="s2">&quot;GkEsth&quot;</span><span class="p">,</span><span class="s2">&quot;Wis&quot;</span><span class="p">,</span><span class="s2">&quot;Sir&quot;</span><span class="p">,</span><span class="s2">&quot;Bar&quot;</span><span class="p">,</span><span class="s2">&quot;PrAzar&quot;</span><span class="p">,</span><span class="s2">&quot;Sus&quot;</span><span class="p">,</span><span class="s2">&quot;Bel&quot;</span><span class="p">,</span><span class="s2">&quot;SgThree&quot;</span><span class="p">,</span><span class="s2">&quot;EpJer&quot;</span><span class="p">,</span><span class="s2">&quot;1Macc&quot;</span><span class="p">,</span><span class="s2">&quot;2Macc&quot;</span><span class="p">,</span><span class="s2">&quot;3Macc&quot;</span><span class="p">,</span><span class="s2">&quot;4Macc&quot;</span><span class="p">,</span><span class="s2">&quot;1Esd&quot;</span><span class="p">,</span><span class="s2">&quot;2Esd&quot;</span><span class="p">,</span><span class="s2">&quot;PrMan&quot;</span><span class="p">]</span>
		<span class="k">for</span> <span class="nx">book</span> <span class="k">in</span> <span class="nx">books</span>
			<span class="nv">bc = </span><span class="nx">book</span> <span class="o">+</span> <span class="s2">&quot;,1&quot;</span>
			<span class="nv">bcv = </span><span class="nx">bc</span> <span class="o">+</span> <span class="s2">&quot;,1&quot;</span>
			<span class="nv">bcv_range = </span><span class="nx">bcv</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">bc</span> <span class="o">+</span> <span class="s2">&quot;,2&quot;</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bc</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bc</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/,/g</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bcv</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bcv</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/,/g</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bcv_range</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="nx">bcv_range</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/,/g</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
		<span class="nx">p</span><span class="p">.</span><span class="nx">include_apocrypha</span> <span class="kc">false</span>
		<span class="k">for</span> <span class="nx">book</span> <span class="k">in</span> <span class="nx">books</span>
			<span class="nv">bc = </span><span class="nx">book</span> <span class="o">+</span> <span class="s2">&quot;.1&quot;</span>
			<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">bc</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;&quot;</span>

<span class="nx">describe</span> <span class="s2">&quot;Spanish parsing&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
	<span class="nv">p = </span><span class="p">{}</span>
	<span class="nx">beforeEach</span> <span class="o">-&gt;</span>
		<span class="nv">p = </span><span class="k">new</span> <span class="nx">bcv_parser</span>
		<span class="nv">p.options.book_alone_strategy = </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nv">p.options.book_sequence_strategy = </span><span class="s2">&quot;ignore&quot;</span>
		<span class="nv">p.options.osis_compaction_strategy = </span><span class="s2">&quot;bc&quot;</span>
		<span class="nv">p.options.captive_end_digits_strategy = </span><span class="s2">&quot;delete&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle chapters&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Mateo 2, 1. CAPÍTULO 6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.2.1,Matt.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Mateo 3,1. CAPITULO 6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.3.1,Matt.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Mateo 4,1. capítulo 6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Matt.4.1,Matt.6&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle explicit verse references&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Fil 2, VERSÍCULO 6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Phil.2.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Luc 1 vers. 6&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Luke.1.6&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle Psalm titles&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Sal 33:tÍtulo&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.33.1&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Salmo 120 TÍT 3, 6 título&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.120.1,Ps.3.6&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Salmo 12 tít.&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Ps.12.1&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle ranges&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Cant. 2,3 á 3,4&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Song.2.3-Song.3.4&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;2 Cr 1,9b-17&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;2Chr.1.9-2Chr.1.17&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle sequences&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Tito 1 y 3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Titus.1,Titus.3&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle ordinals&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;1º corintios 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;1Cor.2&quot;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;3.º Juan 2&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;3John.1.2&quot;</span>

	<span class="nx">it</span> <span class="s2">&quot;should handle EU-style punctuation&quot;</span><span class="p">,</span> <span class="o">-&gt;</span>
		<span class="nx">expect</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s2">&quot;Malaquias 1, 3&quot;</span><span class="p">).</span><span class="nx">osis</span><span class="p">()).</span><span class="nx">toEqual</span> <span class="s2">&quot;Mal.1.3&quot;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 